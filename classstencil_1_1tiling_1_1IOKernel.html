<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>StencilStream: stencil::tiling::IOKernel&lt; T, halo_height, core_height, burst_length, pipe, n_halo_height_buffers, access_mode, access_target &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">StencilStream
   &#160;<span id="projectnumber">v2.1.0</span>
   </div>
   <div id="projectbrief">Generic Stencil Simulation Library for FPGAs.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>stencil</b></li><li class="navelem"><b>tiling</b></li><li class="navelem"><a class="el" href="classstencil_1_1tiling_1_1IOKernel.html">IOKernel</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="classstencil_1_1tiling_1_1IOKernel-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">stencil::tiling::IOKernel&lt; T, halo_height, core_height, burst_length, pipe, n_halo_height_buffers, access_mode, access_target &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Generic Input/Output kernel for use with the <a class="el" href="classstencil_1_1tiling_1_1ExecutionKernel.html">ExecutionKernel</a> and <a class="el" href="classstencil_1_1tiling_1_1Grid.html">Grid</a>.  
 <a href="classstencil_1_1tiling_1_1IOKernel.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="IOKernel_8hpp_source.html">IOKernel.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a4f1b1911ef7887d37b509afcaa6bc0c6"><td class="memItemLeft" align="right" valign="top"><a id="a4f1b1911ef7887d37b509afcaa6bc0c6"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstencil_1_1tiling_1_1IOKernel.html#a4f1b1911ef7887d37b509afcaa6bc0c6">Accessor</a> = cl::sycl::accessor&lt; T, 2, access_mode, access_target &gt;</td></tr>
<tr class="memdesc:a4f1b1911ef7887d37b509afcaa6bc0c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">The exact accessor type required by the IO kernel. <br /></td></tr>
<tr class="separator:a4f1b1911ef7887d37b509afcaa6bc0c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aa38c2d9f25d53121168f8f7c77b87a0d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstencil_1_1tiling_1_1IOKernel.html#aa38c2d9f25d53121168f8f7c77b87a0d">IOKernel</a> (std::array&lt; <a class="el" href="classstencil_1_1tiling_1_1IOKernel.html#a4f1b1911ef7887d37b509afcaa6bc0c6">Accessor</a>, <a class="el" href="classstencil_1_1tiling_1_1IOKernel.html#a2735af2c1f310b4ec49e5d6dc51f3cb8">n_buffers</a> &gt; accessor, uindex_t n_columns)</td></tr>
<tr class="memdesc:aa38c2d9f25d53121168f8f7c77b87a0d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new <a class="el" href="classstencil_1_1tiling_1_1IOKernel.html" title="Generic Input/Output kernel for use with the ExecutionKernel and Grid.">IOKernel</a> instance.  <a href="classstencil_1_1tiling_1_1IOKernel.html#aa38c2d9f25d53121168f8f7c77b87a0d">More...</a><br /></td></tr>
<tr class="separator:aa38c2d9f25d53121168f8f7c77b87a0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a973e6f817028e4ba71ba3497330d73"><td class="memItemLeft" align="right" valign="top"><a id="a8a973e6f817028e4ba71ba3497330d73"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstencil_1_1tiling_1_1IOKernel.html#a8a973e6f817028e4ba71ba3497330d73">read</a> ()</td></tr>
<tr class="memdesc:a8a973e6f817028e4ba71ba3497330d73"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the cells from the buffers and write them to the pipe. <br /></td></tr>
<tr class="separator:a8a973e6f817028e4ba71ba3497330d73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30619e34c4546761e308ade09292d2d6"><td class="memItemLeft" align="right" valign="top"><a id="a30619e34c4546761e308ade09292d2d6"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstencil_1_1tiling_1_1IOKernel.html#a30619e34c4546761e308ade09292d2d6">write</a> ()</td></tr>
<tr class="memdesc:a30619e34c4546761e308ade09292d2d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the cells from the pipe and write them to the buffers. <br /></td></tr>
<tr class="separator:a30619e34c4546761e308ade09292d2d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:acc4920dfb51b5c0d7af763fff6e5835f"><td class="memItemLeft" align="right" valign="top">static constexpr uindex_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstencil_1_1tiling_1_1IOKernel.html#acc4920dfb51b5c0d7af763fff6e5835f">get_buffer_height</a> (uindex_t index)</td></tr>
<tr class="memdesc:acc4920dfb51b5c0d7af763fff6e5835f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the height of a buffer.  <a href="classstencil_1_1tiling_1_1IOKernel.html#acc4920dfb51b5c0d7af763fff6e5835f">More...</a><br /></td></tr>
<tr class="separator:acc4920dfb51b5c0d7af763fff6e5835f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a2735af2c1f310b4ec49e5d6dc51f3cb8"><td class="memItemLeft" align="right" valign="top"><a id="a2735af2c1f310b4ec49e5d6dc51f3cb8"></a>
static constexpr uindex_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstencil_1_1tiling_1_1IOKernel.html#a2735af2c1f310b4ec49e5d6dc51f3cb8">n_buffers</a> = 2 * n_halo_height_buffers + 1</td></tr>
<tr class="memdesc:a2735af2c1f310b4ec49e5d6dc51f3cb8"><td class="mdescLeft">&#160;</td><td class="mdescRight">The total number of buffers in a slice/column. <br /></td></tr>
<tr class="separator:a2735af2c1f310b4ec49e5d6dc51f3cb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47f7730160f6c0c419f0cdb8f9a703fa"><td class="memItemLeft" align="right" valign="top"><a id="a47f7730160f6c0c419f0cdb8f9a703fa"></a>
static constexpr uindex_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstencil_1_1tiling_1_1IOKernel.html#a47f7730160f6c0c419f0cdb8f9a703fa">n_rows</a> = 2 * n_halo_height_buffers * halo_height + core_height</td></tr>
<tr class="memdesc:a47f7730160f6c0c419f0cdb8f9a703fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">The total number of cell rows in the (logical) slice/column. <br /></td></tr>
<tr class="separator:a47f7730160f6c0c419f0cdb8f9a703fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename T, uindex_t halo_height, uindex_t core_height, uindex_t burst_length, typename pipe, uindex_t n_halo_height_buffers, cl::sycl::access::mode access_mode, cl::sycl::access::target access_target = cl::sycl::access::target::device&gt;<br />
class stencil::tiling::IOKernel&lt; T, halo_height, core_height, burst_length, pipe, n_halo_height_buffers, access_mode, access_target &gt;</h3>

<p>Generic Input/Output kernel for use with the <a class="el" href="classstencil_1_1tiling_1_1ExecutionKernel.html">ExecutionKernel</a> and <a class="el" href="classstencil_1_1tiling_1_1Grid.html">Grid</a>. </p>
<p>This kernel provides IO services to the execution kernel by writing the contents of a input tile with halo to the input pipe and writing the output of the execution kernel to an output tile. The input and output code only differs by one line. Therefore, both services are provided by the same class. Unlike <a class="el" href="classstencil_1_1tiling_1_1ExecutionKernel.html">ExecutionKernel</a>, this kernel is supposed to be constructed by a lambda expression that then either executes <a class="el" href="classstencil_1_1tiling_1_1IOKernel.html#a8a973e6f817028e4ba71ba3497330d73">IOKernel::read</a> or <a class="el" href="classstencil_1_1tiling_1_1IOKernel.html#a30619e34c4546761e308ade09292d2d6">IOKernel::write</a>.</p>
<p>Logically, an instance of the IO kernel receives access to a horizontal slice of the input or output and processes this slice in the <a class="el" href="Architecture.html#indexingorder">Indexing and Iteration order</a>. Due to the <a class="el" href="Architecture.html#tiling">Grid Tiling</a>, this slice is partioned vertically into 2*n + 1 buffers, where n is the <code>n_halo_height_buffers</code> template parameter. For the input buffer, n should be 2, and for the output buffer, n should be 1. All buffers are expected to have a static height and dynamic width. The upper n and lower n buffers are all expected be <code>halo_height</code> cells high, while the buffer in the middle is expected to have be <code>core_height</code> cells high.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">T</td><td>Cell value type. </td></tr>
    <tr><td class="paramname">halo_height</td><td>The radius (aka width and height) of the tile halo (and therefore both dimensions of a corner buffer). </td></tr>
    <tr><td class="paramname">core_height</td><td>The height of the core buffer. </td></tr>
    <tr><td class="paramname">burst_length</td><td>The number of elements that can be read or written in a burst. </td></tr>
    <tr><td class="paramname">pipe</td><td>The pipe to read or write to. </td></tr>
    <tr><td class="paramname">n_halo_height_buffers</td><td>The number of buffers to accept, in addition to the core buffer. </td></tr>
    <tr><td class="paramname">access_mode</td><td>The access mode to expect for the buffer accessor. </td></tr>
    <tr><td class="paramname">access_target</td><td>The access target to expect for the buffer accessor. </td></tr>
  </table>
  </dd>
</dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aa38c2d9f25d53121168f8f7c77b87a0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa38c2d9f25d53121168f8f7c77b87a0d">&#9670;&nbsp;</a></span>IOKernel()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T , uindex_t halo_height, uindex_t core_height, uindex_t burst_length, typename pipe , uindex_t n_halo_height_buffers, cl::sycl::access::mode access_mode, cl::sycl::access::target access_target = cl::sycl::access::target::device&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classstencil_1_1tiling_1_1IOKernel.html">stencil::tiling::IOKernel</a>&lt; T, halo_height, core_height, burst_length, pipe, n_halo_height_buffers, access_mode, access_target &gt;::<a class="el" href="classstencil_1_1tiling_1_1IOKernel.html">IOKernel</a> </td>
          <td>(</td>
          <td class="paramtype">std::array&lt; <a class="el" href="classstencil_1_1tiling_1_1IOKernel.html#a4f1b1911ef7887d37b509afcaa6bc0c6">Accessor</a>, <a class="el" href="classstencil_1_1tiling_1_1IOKernel.html#a2735af2c1f310b4ec49e5d6dc51f3cb8">n_buffers</a> &gt;&#160;</td>
          <td class="paramname"><em>accessor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uindex_t&#160;</td>
          <td class="paramname"><em>n_columns</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a new <a class="el" href="classstencil_1_1tiling_1_1IOKernel.html" title="Generic Input/Output kernel for use with the ExecutionKernel and Grid.">IOKernel</a> instance. </p>
<p>The created instance is not invocable. You need to construct it inside a lambda function (or equivalent) and then call either <a class="el" href="classstencil_1_1tiling_1_1IOKernel.html#a8a973e6f817028e4ba71ba3497330d73">IOKernel::read</a> or <a class="el" href="classstencil_1_1tiling_1_1IOKernel.html#a30619e34c4546761e308ade09292d2d6">IOKernel::write</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">accessor</td><td>The slice/column of buffer accessors to process. </td></tr>
    <tr><td class="paramname">n_columns</td><td>The width of every buffer passed in <code>accessor</code>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="acc4920dfb51b5c0d7af763fff6e5835f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc4920dfb51b5c0d7af763fff6e5835f">&#9670;&nbsp;</a></span>get_buffer_height()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T , uindex_t halo_height, uindex_t core_height, uindex_t burst_length, typename pipe , uindex_t n_halo_height_buffers, cl::sycl::access::mode access_mode, cl::sycl::access::target access_target = cl::sycl::access::target::device&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static constexpr uindex_t <a class="el" href="classstencil_1_1tiling_1_1IOKernel.html">stencil::tiling::IOKernel</a>&lt; T, halo_height, core_height, burst_length, pipe, n_halo_height_buffers, access_mode, access_target &gt;::get_buffer_height </td>
          <td>(</td>
          <td class="paramtype">uindex_t&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the height of a buffer. </p>
<p>As described in the description, the first and last n buffers are <code>halo_height</code> cells high, while the middle buffer is <code>core_height</code> cells high. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>StencilStream/tiling/<a class="el" href="IOKernel_8hpp_source.html">IOKernel.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
